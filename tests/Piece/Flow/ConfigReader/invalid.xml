<?xml version="1.0" encoding="ISO-8859-1"?>
<flow name="registrationFlow" firstState="displaying">
  <lastState name="finishing"/>
  <viewState name="displaying" view="input">
    <transition event="submit" nextState="validated">
      <action service="Piece_FlowTestCaseAction" method="validate"/>
    </transition>
  </viewState>
  <viewState name="confirming" view="confirmation">
    <transition event="submit" nextState="validated">
      <action service="Piece_FlowTestCaseAction" method="validate"/>
    </transition>
  </viewState>
  <actionState name="validated">
    <transition event="raiseError" nextState="displaying"/>
    <transition event="succeedInValidatingViaDisplaying" nextState="confirming"/>
    <transition event="succeedInValidatingViaConfirming" nextState="registered">
      <action service="Piece_FlowTestCaseAction"/>
    </transition>
  </actionState>
  <actionState name="registered">
    <transition event="raiseError" nextState="displaying"/>
    <transition event="succeed" nextState="finishing"/>
  </actionState>
</flow>
