<?xml version="1.0" encoding="UTF-8" ?>
<!-- $Id$ -->
<!DOCTYPE package SYSTEM "http://pear.php.net/dtd/package-1.0">
<package version="1.0" packagerversion="1.4.9">
 <name>Piece_Flow</name>
 <summary>A web flow engine and a continuation server</summary>
 <description>Piece_Flow is a generic web flow engine and a continuation server based on Finite State Machine(FSM). Piece_Flow provides a stateful programming model for developers, and high secrity for applications.
 </description>
 <maintainers>
  <maintainer>
   <user>iteman</user>
   <name>KUBO Atsuhiro</name>
   <email>iteman@users.sourceforge.net</email>
   <role>lead</role>
  </maintainer>
  </maintainers>
 <release>
  <version>1.5.0</version>
  <date>2006-08-15</date>
  <license>BSD License (revised)</license>
  <state>stable</state>
  <notes>This release includes an enhancement and breaks backward compatibility as follows:

&lt;&lt;&lt; Enhancements &gt;&gt;&gt;

- Introduced Piece_Flow_Action as the base class for Piece_Flow actions.
- Changed the interface of Piece_Flow actions so as to call setFlow(), setPayload(), and setEvent() methods for passing a Piece_Flow object, a payload, and the event name to an action instead of by the arguments of invoke() method.
- The original Piece_Flow_Action class has been renamed as Piece_Flow_Action_Invoker.
  </notes>
  <deps>
   <dep type="php" rel="ge" version="4.3.0" optional="no"/>
   <dep type="pkg" rel="ge" version="1.7.0" optional="no">Stagehand_FSM</dep>
   <dep type="pkg" rel="ge" version="1.7.0" optional="no">Cache_Lite</dep>
   <dep type="pkg" rel="ge" version="1.4.3" optional="no">PEAR</dep>
   <dep type="pkg" rel="ge" version="0.3.0" optional="yes">Stagehand_TestRunner</dep>
  </deps>
  <filelist>
   <dir name="/" baseinstalldir="/">
    <dir name="data">
     <file role="data" name="piece-flow.rng" install-as="piece-flow.rng">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
     <file role="data" name="piece-flow.yaml" install-as="piece-flow.yaml">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
     <file role="data" name="Registration.xml" install-as="Registration.xml">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
     <file role="data" name="Registration.yaml" install-as="Registration.yaml">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
    </dir> <!-- /data -->
    <dir name="docs">
     <file role="doc" name="LICENSE" install-as="LICENSE">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
     <file role="doc" name="README.sdoc" install-as="README.sdoc">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
    </dir> <!-- /docs -->
    <dir name="Piece">
     <dir name="Flow">
      <dir name="Action">
       <file role="php" name="Factory.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="php" name="Invoker.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
      </dir> <!-- /Piece/Flow/Action -->
      <dir name="ConfigReader">
       <file role="php" name="Common.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="php" name="Factory.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="php" name="XML4.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="php" name="XML5.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="php" name="YAML.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
      </dir> <!-- /Piece/Flow/ConfigReader -->
      <file role="php" name="Action.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="php" name="Config.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="php" name="Continuation.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="php" name="Error.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
     </dir> <!-- /Piece/Flow -->
     <file role="php" name="Flow.php">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
    </dir> <!-- /Piece -->
    <dir name="tests">
     <dir name="Piece">
      <dir name="Flow">
       <dir name="Action">
        <file role="test" name="BarAction.php" install-as="Piece/Flow/Action/BarAction.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="FactoryTestCase.php" install-as="Piece/Flow/Action/FactoryTestCase.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="FooAction.php" install-as="Piece/Flow/Action/FooAction.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="InvalidAction.php" install-as="Piece/Flow/Action/InvalidAction.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="InvokerTestCase.php" install-as="Piece/Flow/Action/InvokerTestCase.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="TestRunner.php" install-as="Piece/Flow/Action/TestRunner.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
       </dir> <!-- /tests/Piece/Flow/Action -->
       <dir name="ConfigReader">
        <file role="test" name="Baz.php" install-as="Piece/Flow/ConfigReader/Baz.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="broken.xml" install-as="Piece/Flow/ConfigReader/broken.xml">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="CompatibilityTest.php" install-as="Piece/Flow/ConfigReader/CompatibilityTest.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="FactoryTestCase.php" install-as="Piece/Flow/ConfigReader/FactoryTestCase.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="invalid.xml" install-as="Piece/Flow/ConfigReader/invalid.xml">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="TestRunner.php" install-as="Piece/Flow/ConfigReader/TestRunner.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="XML4TestCase.php" install-as="Piece/Flow/ConfigReader/XML4TestCase.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="XML5TestCase.php" install-as="Piece/Flow/ConfigReader/XML5TestCase.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
        <file role="test" name="YAMLTestCase.php" install-as="Piece/Flow/ConfigReader/YAMLTestCase.php">
         <replace from="@package_version@" to="version" type="package-info"/>
        </file>
       </dir> <!-- /tests/Piece/Flow/ConfigReader -->
       <file role="test" name="ContinuationTestCase.php" install-as="Piece/Flow/ContinuationTestCase.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="Counter.yaml" install-as="Piece/Flow/Counter.yaml">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="CounterAction.php" install-as="Piece/Flow/CounterAction.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="FooAction.php" install-as="Piece/Flow/FooAction.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="SecondCounter.yaml" install-as="Piece/Flow/SecondCounter.yaml">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="SecondCounterAction.php" install-as="Piece/Flow/SecondCounterAction.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="Shutdown.yaml" install-as="Piece/Flow/Shutdown.yaml">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="ShutdownAction.php" install-as="Piece/Flow/ShutdownAction.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
       <file role="test" name="TestRunner.php" install-as="Piece/Flow/TestRunner.php">
        <replace from="@package_version@" to="version" type="package-info"/>
       </file>
      </dir> <!-- /tests/Piece/Flow -->
      <file role="test" name="CDPlayer.yaml" install-as="Piece/CDPlayer.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="FlowCDPlayerAction.php" install-as="Piece/FlowCDPlayerAction.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="FlowInitialAction.php" install-as="Piece/FlowInitialAction.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="FlowInvalidEventFromTransitionActionsOrActivitiesAction.php" install-as="Piece/FlowInvalidEventFromTransitionActionsOrActivitiesAction.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="FlowProblemThatActivityIsInvokedTwiceUnexpectedlyAction.php" install-as="Piece/FlowProblemThatActivityIsInvokedTwiceUnexpectedlyAction.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="FlowTestCase.php" install-as="Piece/FlowTestCase.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="FlowTestCaseAction.php" install-as="Piece/FlowTestCaseAction.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="initial.xml" install-as="Piece/initial.xml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="initial.yaml" install-as="Piece/initial.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="invalid.yaml" install-as="Piece/invalid.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="InvalidEventFromTransitionActionsOrActivities.yaml" install-as="Piece/InvalidEventFromTransitionActionsOrActivities.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="optional.xml" install-as="Piece/optional.xml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="optional.yaml" install-as="Piece/optional.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="ProblemThatActivityIsInvokedTwiceUnexpectedly.yaml" install-as="Piece/ProblemThatActivityIsInvokedTwiceUnexpectedly.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="ProtectedEvents.yaml" install-as="Piece/ProtectedEvents.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="ProtectedStates.yaml" install-as="Piece/ProtectedStates.yaml">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
      <file role="test" name="TestRunner.php" install-as="Piece/TestRunner.php">
       <replace from="@package_version@" to="version" type="package-info"/>
      </file>
     </dir> <!-- /tests/Piece -->
     <file role="test" name="AllTestRunner.php" install-as="AllTestRunner.php">
      <replace from="@package_version@" to="version" type="package-info"/>
     </file>
    </dir> <!-- /tests -->
   </dir> <!-- / -->
  </filelist>
 </release>
 <changelog>
  <release>
   <version>1.5.0</version>
   <date>2006-08-15</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>This release includes an enhancement and breaks backward compatibility as follows:

&lt;&lt;&lt; Enhancements &gt;&gt;&gt;

- Introduced Piece_Flow_Action as the base class for Piece_Flow actions.
- Changed the interface of Piece_Flow actions so as to call setFlow(), setPayload(), and setEvent() methods for passing a Piece_Flow object, a payload, and the event name to an action instead of by the arguments of invoke() method.
- The original Piece_Flow_Action class has been renamed as Piece_Flow_Action_Invoker.
   </notes>
  </release>
  <release>
   <version>1.4.1</version>
   <date>2006-07-28</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>This release includes two defect fixes and an enhancement as follows:

&lt;&lt;&lt; Defect fixes &gt;&gt;&gt;

- Removed wrong error handling which disables the current callback.
- Removed &apos;@&apos; operator from include_once.

&lt;&lt;&lt; Enhancements &gt;&gt;&gt;

- Changed the code so as to use $array[] = $value instead of array_push($array, $value).
   </notes>
  </release>
  <release>
   <version>1.4.0</version>
   <date>2006-07-22</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>This release includes a few enhancements as follows:

&lt;&lt;&lt; Enhancements &gt;&gt;&gt;

* Piece_Flow_Action
- Adjusted to changes in Stagehand_FSM package.

* Piece_Flow_ConfigReader_Common
- Changed the code so as to get the flow name from the current source.

* the schema of flow definitions
- Removed &apos;name&apos; attribute from &apos;flow&apos; element in piece-flow.rng.
- Removed &apos;name&apos; element in piece-flow.yaml.
   </notes>
  </release>
  <release>
   <version>1.3.0</version>
   <date>2006-07-17</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>This release includes a few enhancements as follows:

&lt;&lt;&lt; Enhancements &gt;&gt;&gt;

* Piece_Flow_Action
- Added support for raising an exception when an invalid event is returned from actions.

* Piece_Flow
- Changed the error code from PIECE_FLOW_ERROR_INVALID_OPERATION to PIECE_FLOW_ERROR_ALREADY_SHUTDOWN when triggering events after shutting down a flow.

* Piece_Flow_Continuation
- Changed the code so as never to start a new flow execution again after shtting down in single flow mode.

* Piece_Flow_Error
- Added PIECE_FLOW_ERROR_ALREADY_SHUTDOWN constant.
- Added PIECE_FLOW_ERROR_INVALID_EVENT constant.
   </notes>
  </release>
  <release>
   <version>1.2.1</version>
   <date>2006-07-12</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>- Fixed the wrong version number of Stagehand_FSM package from 1.4.0 to 1.5.0.
   </notes>
  </release>
  <release>
   <version>1.2.0</version>
   <date>2006-07-12</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>This release includes a few enhancements and fixing two problems as follows:

Enhancements:

* Piece_Flow
- Added support to prevent configuring protected events and states.
- Added error handling for failure to invoke actions.

* Example flow definitions
- Changed some state names and view names to conform the Spring Web Flow best practices.

Defect fixes:

- Fixed the problem that the protected events of the FSM can be triggered by users.
- Fixed the problem that &apos;entry&apos;, &apos;exit&apos;, and &apos;activity&apos; for the last state could not be added.
   </notes>
  </release>
  <release>
   <version>1.1.1</version>
   <date>2006-07-07</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>This is a bug fix release.

- Fixed the problem that relative path cannot be used as the cache directory and action cirectory with Solaris.
   </notes>
  </release>
  <release>
   <version>1.1.0</version>
   <date>2006-07-04</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>- Piece/Flow.php: Added removeAttribute()/clearAttributs() for removing attributes from flows.
   </notes>
  </release>
  <release>
   <version>1.0.0</version>
   <date>2006-06-19</date>
   <license>BSD License (revised)</license>
   <state>stable</state>
   <notes>The first stable release of Piece_Flow.
   </notes>
  </release>
  <release>
   <version>0.4.0</version>
   <date>2006-04-21</date>
   <license>BSD License (revised)</license>
   <state>beta</state>
   <notes>The first release of Piece_Flow.
   </notes>
  </release>
 </changelog>
</package>
